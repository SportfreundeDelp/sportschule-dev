{% extends "kursverwaltung/base.html" %}
{% load staticfiles %}

{% block content %}

<!--Etwas CSS damit die erste spalte fix ist-->
<style>
.table > thead:first-child > tr:first-child > th:first-child {
    position: absolute;
    display: inline-block;
    background-color: white;
}

.table > tbody > tr > td:first-child {
    position: absolute;
    display: inline-block;
    background-color: white;
}

.table > thead:first-child > tr:first-child > th:nth-child(2) {
    padding-left: 100px;
}

.table > tbody > tr > td:nth-child(2) {
    padding-left: 100px !important;
}
</style>

{% if user.is_authenticated %}
    <div class="container">
        <h1>Kunden</h1>
            <div class="table-responsive">
            {% if kunden_liste %}
                <table class="table table-bordered table-hover ">
                    <thead>
                        <tr>
                            <th>Aktion</th>
                            <th>Kd-Nr.</th>
                            <th>Name</th>
                            <th>Straße</th>
                            <th>Hausnummer</th>
                            <th>PLZ</th>
                            <th>Stadt</th>
                            <th>Ansprechpartner</th>
                            <th>Handy</th>
                            <th>Festnetz</th>
                            <th>Fax</th>
                            <th>E-Mail</th>
                        <tr>
                    </thead>
                    {% for kunde in kunden_liste %}
                        <tbody>
                            <tr>
                                <td >
                                    <a href={% url 'kunde_aktualisieren' pk=kunde.id %}>
                                        <img src="{% static 'kursverwaltung/ico/edit.svg' %}"
                                        title="Kunde ändern"
                                        height="20" width="20"
                                        >
                                    </a>
                                    <a href={% url 'kunde_entfernen' pk=kunde.id %}>
                                        <img src="{% static 'kursverwaltung/ico/delete.svg' %}"
                                        title="Kunde entfernen"
                                        height="20" width="20"
                                        >
                                    </a>
                                </td>
                                <td>{{kunde.id}}</td>
                                <td><a href="/kursverwaltung/kunden/{{ kunde.id }}/">{{ kunde.nachname}}, {{kunde.vorname}}</a></td>
                                <td>{{kunde.strasse}}</td>
                                <td>{{kunde.hausnummer}}</td>
                                <td>{{kunde.plz}}</td>
                                <td>{{kunde.stadt}}</td>
                                <td>{{kunde.ansprechpartner}}</td>
                                <td>{{kunde.handy}}</td>
                                <td>{{kunde.festnetz}}</td>
                                <td>{{kunde.fax}}</td>
                                <td>{{kunde.e_mail}}</td>
                            </tr>
                        </tbody>
                    {% endfor %}
                </table>
            </div>
    </div>
{% else %}
    <p>Es sind aktuell keine Kunden verfügbar.</p>
{% endif %}
    <div>
        <p>
        <a href="{% url 'kunde_erstellen' %}" class="btn btn-primary">Kunde hinzufügen</a>
        <a href="{% url 'index' %}" class="btn btn-secondary">Zurück</a>
        </p>
    </div>
{% else %}
    <div style="color:red">
        <h2>Fehler bei der Authentifizierung</h2>
        <p>Sie dürfen diese Seite nicht anzeigen.</p>
        <p>Bitte melden Sie sich an.</p>
    </div>
{% endif %}

{% endblock %}
